<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
    <mapper namespace="com.semi.main.payment.PaymentDAO">
     <insert id="paymentAdd" parameterType="PaymentDTO">
        INSERT INTO PAYMENT (PAYMENTNO, USERNO, PRONO, STATUSNO, UIDNO, PAYMENTDATE, TOTALPRICE, NAME, PRONAME)
        VALUES (#{paymentNo}, #{userNo}, #{proNo}, 1, #{uidNo}, SYSDATE, #{totalPrice}, #{name}, #{proName})
     </insert>
     
     <select id="getPayList" resultType="PaymentDTO" parameterType="Pager">
     
	  SELECT PAYMETNO,USERID,NAME,PRONAME,TOTALPRICE,PAYMENTDATE,STATUSNAME
	  FROM(SELECT ROWNUM R, B.*   	
	     FROM(	
	     	SELECT PM.*, M.USERID, PS.STATUSNAME
	     	FROM PAYMENT PM JOIN MEMBER M
	     	ON (PM.USERNO = M.USERNO) JOIN PAYMENTSTATUS PS
	     	ON (PM.STATUSNO = PS.STATUSNO)
	     	ORDER BY PAYMENTDATE DESC
	     	)B )
	     WHERE R BETWEEN #{startRow} AND #{lastRow}
 
     </select>
     
     <select id="getTotal" resultType="Long" parameterType="Pager">
  		SELECT COUNT(PAYMENTNO) FROM PAYMENT
  	</select>
     
  
  </mapper>